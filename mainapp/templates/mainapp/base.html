{% load static %}
<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<title>{{ title }}</title>
		<link rel="icon" href="{% static '/img/brand/favicon.png' %}" type="image/x-icon"/>

		<!-- css -->
		<link rel="stylesheet" href="{% static 'css/bootstrap.css' %}?v=2">
		<link rel="stylesheet" href="{% static 'css/all.min.css' %}">
		<link rel="stylesheet" href="{% static 'css/jquery-ui.min.css' %}">
		<link rel="stylesheet" href="{% static 'css/jquery-ui.structure.min.css' %}">
		<link rel="stylesheet" href="{% static 'css/jquery-ui.theme.min.css' %}">

		<!-- JS -->
		<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
		<script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
	</head>
<body>

<header class="navbar navbar-light sticky-top navbar-expand-xl flex-xl-nowrap p-0">
	<a class="navbar-brand col me-0 px-3 fs-6" href="{% url 'main_page' %}">
		<img src="{% static 'img/brand/logo.svg' %}" alt="">
	</a> <!--/navbar-brand-->


	<button class="navbar-toggler collapsed me-3" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
		<span class="navbar-toggler-icon"></span>
	</button> <!--/navbar-toggler-->


	<ul class="navbar-nav d-flex d-xl-none me-3">
		<li class="nav-item dropdown">
			<a class="nav-link dropdown-toggle navbar-profile-user d-flex align-items-center" href="javascript:void(0)" role="button" data-bs-toggle="dropdown" aria-expanded="false">
				<span class="d-flex align-items-center justify-content-center text-bg-outline-secondary rounded-circle" style="width: 40px; height: 40px;">
					<i class="fa-regular fa-circle-user"></i>
				</span>
			</a>

			<div class="dropdown-menu position-absolute dropdown-menu-end pt-0">
				<div class="p-3 border-bottom mb-2">
					<div class="d-flex wd-100p">
						<span class="d-flex align-items-center justify-content-center text-bg-outline-secondary rounded-circle" style="width: 40px; height: 40px;">
							<i class="fa-regular fa-circle-user"></i>
						</span>

						<div class="ms-3 my-auto">
							<div class="h6 mb-0">
								{{ user.first_name }}
							</div>
						</div>
					</div>
				</div>

				{% if user.is_superuser %}
				<a class="dropdown-item" href="{% url 'admin:index' %}">
					<i class="fa-regular fa-circle-user me-2"></i>
					Административный режим
				</a> <!-- /dropdown-item -->

				<hr class="dropdown-divider">

				{% endif %}

				<a class="dropdown-item mb-0" href="{% url 'logout' %}">
					<i class="fa-regular fa-right-from-bracket me-2"></i>
					Выход
				</a> <!-- /dropdown-item -->
			</div> <!-- /dropdown-menu -->
		</li> <!-- /nav-item -->
	</ul> <!-- /navbar-nav -->


	<ul class="navbar-nav d-none d-xl-flex ms-auto me-3">
		<li class="nav-item dropdown">
			<a class="nav-link dropdown-toggle navbar-profile-user d-flex align-items-center" href="javascript:void(0)" role="button" data-bs-toggle="dropdown" aria-expanded="false">
				<span class="d-flex align-items-center justify-content-center text-bg-outline-secondary rounded-circle" style="width: 40px; height: 40px;">
					<i class="fa-regular fa-circle-user"></i>
				</span>
			</a>

			<div class="dropdown-menu dropdown-menu-end pt-0">
				<div class="p-3 border-bottom mb-2">
					<div class="d-flex wd-100p">
						<span class="d-flex align-items-center justify-content-center text-bg-outline-secondary rounded-circle" style="width: 40px; height: 40px;">
							<i class="fa-regular fa-circle-user"></i>
						</span>

						<div class="ms-3 my-auto">
							<div class="h6 mb-0">
								{{ user.first_name }}
							</div>
						</div>
					</div>
				</div>
				{% if user.is_superuser %}
				<a class="dropdown-item" href="{% url 'admin:index' %}">
					<i class="fa-regular fa-circle-user me-2"></i>
					Административный режим
				</a> <!-- /dropdown-item -->
				<hr class="dropdown-divider">
				{% endif %}


				<a class="dropdown-item mb-0" href="{% url 'logout' %}">
					<i class="fa-regular fa-right-from-bracket me-2"></i>
					Выход
				</a> <!-- /dropdown-item -->
			</div> <!-- /dropdown-menu -->
		</li> <!-- /nav-item -->
	</ul> <!-- /navbar-nav -->
</header> <!--/navbar-->


<div class="container-fluid">
	<div class="row">
		<nav id="sidebarMenu" class="col-12 col-xl-2 d-xl-block sidebar collapse">

			<a class="navbar-brand d-none d-xl-flex" href="{% url 'main_page' %}">
				<img src="{% static 'img/brand/logo.svg' %}" alt="">
			</a> <!--/navbar-brand-->

			<div class="position-sticky sidebar-sticky">

				<h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-3 text-muted text-uppercase">
					<span>
						Действия
					</span>
				</h6>

				<ul class="nav nav-fill flex-column">

					<li class="nav-item">
						<a class="{% if request.resolver_match.url_name == 'main_page' %}
						active
						{% endif %}
						  nav-link d-inline-flex align-items-center" href="{% url 'main_page' %}">
							<i class="fa-regular fa-address-card anim-opacity me-3"></i>
							Главная
						</a>
					</li> <!-- /nav-item -->

					<li class="nav-item">
						<a class="{% if request.resolver_match.url_name == 'transactions' or request.resolver_match.url_name == 'transaction_create' or request.resolver_match.url_name == 'transaction_edit' %}
						active
						{% endif %}
						  nav-link d-inline-flex align-items-center" href="{% url 'transactions' %}">
							<i class="fa-regular fa-album-circle-plus anim-opacity me-3"></i>
							Транзакции
						</a>
					</li> <!-- /nav-item -->

					<li class="nav-item">
						<a class="{% if request.resolver_match.url_name == 'balance_holders' or request.resolver_match.url_name == 'holder_create' or request.resolver_match.url_name == 'holder_update' %}
						active
						{% endif %}
						 nav-link d-inline-flex align-items-center" href="{% url 'balance_holders' %}">
							<i class="fa-regular fa-album-collection anim-opacity me-3"></i>
							Балансодержатели
						</a>
					</li> <!-- /nav-item -->

				</ul> <!-- /nav -->


				<ul class="nav nav-fill flex-column">

					<li class="nav-item">
						<a class="{% if request.resolver_match.url_name == 'pay_types' or request.resolver_match.url_name == 'pay_create' %}
						active
						{% endif %}
						nav-link d-inline-flex align-items-center" href="{% url 'pay_types' %}">
							<i class="fa-regular fa-alien-8bit anim-opacity me-3"></i>
							Типы платежей
						</a>
					</li> <!-- /nav-item -->

				</ul> <!-- /nav -->


				<ul class="nav nav-fill flex-column">

					<li class="nav-item">
						<a class="{% if request.resolver_match.url_name == 'additional_data' or request.resolver_match.url_name == 'addition_create' %}
						active
						{% endif %}
						nav-link d-inline-flex align-items-center" href="{% url 'additional_data' %}">
							<i class="fa-regular fa-newspaper anim-opacity me-3"></i>
							Доп данные по транзакции
						</a>
					</li>

				</ul> <!-- /nav -->

				{% if user.is_superuser %}
					<ul class="nav nav-fill flex-column">
						<li class="nav-item">
							<a class="{% if request.resolver_match.url_name == 'transactions_log' %}
							active
							{% endif %}
							nav-link d-inline-flex align-items-center" href="{% url 'transactions_log' %}">
								<i class="fa-regular fa-newspaper anim-opacity me-3"></i>
								Данные по изменениям транз.
							</a>
						</li>
					</ul> <!-- /nav -->
				{% endif %}

				{% if user.is_superuser %}
					<ul class="nav nav-fill flex-column">
						<li class="nav-item">
							<a class="{% if request.resolver_match.url_name == 'users' or request.resolver_match.url_name == 'edit_user' or request.resolver_match.url_name == 'create_user' %}
							active
							{% endif %}
							nav-link d-inline-flex align-items-center" href="{% url 'users' %}">
								<i class="fa-regular fa-newspaper anim-opacity me-3"></i>
								Пользователи
							</a>
						</li>
					</ul> <!-- /nav -->
				{% endif %}

				{% if user.telegram_id %}
				{% else %}
					<ul class="nav nav-fill flex-column">
						<li class="nav-item">
							<a class="{% if request.resolver_match.url_name == 'lock_page' %}
							active
							{% endif %}
							nav-link d-inline-flex align-items-center" href="{% url 'lock_page' %}">
								Привязать Telegram
							</a>
						</li>
					</ul> <!-- /nav -->
				{% endif %}

			</div> <!--/sidebar-sticky-->
		</nav> <!--/sidebar-->


		<main class="col-12 col-xl-10 px-xl-4 ms-xl-auto">

			<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-end pt-3 pb-2 mt-2 mb-2">
				<h1 class="h5">
					{{ title }}
				</h1> <!-- /title -->


				<nav aria-label="breadcrumb">
					<ol class="breadcrumb mb-1">

						{% if request.resolver_match.url_name == 'main_page' %}
							<li class="breadcrumb-item active" aria-current="page">
								{{ title }}
							</li>
						{% else %}
							<li class="breadcrumb-item">
								<a href="{% url 'main_page' %}">
									Главная
								</a>
							</li>
						{% if inside %}
							<li class="breadcrumb-item">
								<a href="/{{ inside.page_url }}">
									{{ inside.page_title }}
								</a>
							</li>
						{% endif %}
							<li class="breadcrumb-item active" aria-current="page">
								{{ title }}
							</li>
						{% endif %}

					</ol> <!-- /breadcrumb -->
				</nav> <!-- /breadcrumb-container -->
			</div> <!-- /page-title -->

{% block content %}

{% endblock content %}

		</main> <!-- /content -->
	</div> <!-- /row -->
</div> <!-- /container-fluid -->

<script>
	function fallbackCopyTextToClipboard(text) {
	  var textArea = document.createElement("textarea");
	  textArea.value = text;

	  // Avoid scrolling to bottom
	  textArea.style.top = "0";
	  textArea.style.left = "0";
	  textArea.style.position = "fixed";

	  document.body.appendChild(textArea);
	  textArea.focus();
	  textArea.select();

	  try {
		var successful = document.execCommand('copy');
		var msg = successful ? 'successful' : 'unsuccessful';
	  } catch (err) {
	  }

	  document.body.removeChild(textArea);
	}
	function copyTextToClipboard(text) {
	  if (!navigator.clipboard) {
		fallbackCopyTextToClipboard(text);
		return;
	  }
	  navigator.clipboard.writeText(text).then(function() {
		var x = 1;
	  }, function(err) {
		var x = 0;
	  });
	}
</script>

<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script> -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js" integrity="sha384-IDwe1+LCz02ROU9k972gdyvl+AESN10+x7tBKgc9I5HFtuNz0wWnPclzo6p9vxnk" crossorigin="anonymous"></script>

<script>
	var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
	var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
		return new bootstrap.Tooltip(tooltipTriggerEl)
	})
</script>

<script>
	const popoverTriggerList = document.querySelectorAll('[data-bs-toggle="popover"]')
	const popoverList = [...popoverTriggerList].map(popoverTriggerEl => new bootstrap.Popover(popoverTriggerEl))
</script>

<script src="{% static '/js/jquery.js' %}"></script>
<script src="{% static '/js/jquery.vmap.sampledata.js' %}"></script>
<script src="{% static '/js/jquery-ui.js' %}"></script>

</body>
</html>
