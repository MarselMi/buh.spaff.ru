{% extends 'mainapp/base.html' %}
{% load static %}
{% block content %}

	<div class="row mb-4">
		<div class="col-12">
			<div class="card">
				<div class="card-body">
					<div class="card-header d-flex align-items-center card-header-no-bg border-bottom-0">
						{% if user.is_superuser or user.is_staff %}
						<div class="card-options ms-auto">
							<a href="{% url 'create_user' %}" class="btn btn-primary btn-sm">Создать пользователя</a>
						</div>
						{% endif %}
					</div>
					<div class="table-responsive">
						{% if users %}
						<div class="card-body">
							<div class="table-responsive">
								<table class="table table-bordered text-nowrap mb-0">
									<thead>
										<tr class="text-center">
											<th>ID</th>
											<th>Логин</th>
											<th>Фамилия</th>
											<th>Имя</th>
											<th>Доступные балансодержатели</th>
											<th>Статус персонала</th>
											<th>Статус суперпользователя</th>
										</tr>
									</thead>
									{% for object in users %}
									<tbody>
										<tr class="align-middle text-center">
											<td>
												{{ object.id }}
												{% if user.is_superuser %}
													<a href="{% url 'edit_user' object.id %}" class="btn btn-light btn-sm" data-bs-toggle="tooltip" data-bs-title="Редактировать">
														<i class="fa-regular fa-pen-to-square"></i>
													</a>
												{% endif %}
											</td>
											<td>{{ object.username }}</td>
											<td>{{ object.last_name }}</td>
											<td>{{ object.first_name }}</td>
											<td>{% if object.is_superuser %}
												All <i class="fa-regular fa-circle-check text-success" data-bs-toggle="tooltip" data-bs-title="Суперпользователь"></i>
												{% else %}
													{% if object.balanceholder_id %}
														{% for holder in object.balanceholder_id %}
															{{ holder }}<br>
														{% endfor %}
													{% else %}
														&ndash;
													{% endif %}
												{% endif %}
											</td>
											<td>{% if object.is_staff %}
												<i class="fa-regular fa-circle-check text-success" data-bs-toggle="tooltip" data-bs-title="Статус персонала"></i>
												{% else %}
												&ndash;
												{% endif %}
											</td>
											<td>{% if object.is_superuser %}
												<i class="fa-regular fa-circle-check text-success" data-bs-toggle="tooltip" data-bs-title="Суперпользователь"></i>
												{% else %}
												&ndash;
												{% endif %}
											</td>
										</tr>
									</tbody>
									{% endfor %}
								</table> <!-- /table -->
							</div> <!-- /table-responsive -->

						</div>
						{% else %}
						<div class="alert alert-warning" role="alert">
							<h5 class="alert-heading text-center">
								<i class="fa-regular fa-octagon-exclamation me-2"></i>
								Нет доступных данных
							</h5>
						</div>
						{% endif %}
					</div> <!-- /table-responsive -->
				</div> <!-- /card-body -->
			</div> <!-- /card -->
		</div> <!-- /col -->
	</div> <!--/row-->

{% endblock content %}
